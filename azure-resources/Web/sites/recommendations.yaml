- description: 診断ログを有効にする
  aprlGuid: 493f6079-3bb6-4a56-96ba-ab3248474cb1
  recommendationTypeId: null
  recommendationControl: Monitoring and Alerting
  recommendationImpact: Low
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    Azure App Service の診断ログを有効にすることは、アプリケーション ログと Web サーバー ログの両方を含む監視と診断にとって重要です。
  potentialBenefits: Monitoring and Alerting
  pgVerified: false
  publishedToLearn: false
  automationAvailable: false
  tags: null
  learnMoreLink:
    - name: Enable diagnostics logging for apps in Azure App Service
      url: "https://learn.microsoft.com/azure/app-service/troubleshoot-diagnostic-logs"

- description: パフォーマンスを監視する
  aprlGuid: a7e8bb3d-8ceb-442d-b26f-007cd63f9ffc
  recommendationTypeId: null
  recommendationControl: Monitoring and Alerting
  recommendationImpact: High
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    Application Insights を使用して、アプリのパフォーマンスと負荷の動作を監視し、リアルタイムの分析情報、問題の診断、根本原因の分析を提供します。Azure App Service で ASP.NET、ASP.NET Core、Java、Node.js をサポートし、監視機能が組み込まれました。
  potentialBenefits: Real-time insights and issue diagnosis
  pgVerified: true
  publishedToLearn: false
  automationAvailable: false
  tags: null
  learnMoreLink:
    - name: Application Insights
      url: "https://learn.microsoft.com/azure/application-insights/app-insights-overview"
    - name: Application monitoring for Azure App Service
      url: "https://learn.microsoft.com/azure/azure-monitor/app/azure-web-apps"

- description: Web アプリを Web API から分離する
  aprlGuid: 78a5c033-ff51-4332-8a71-83464c34494b
  recommendationTypeId: null
  recommendationControl: Scalability
  recommendationImpact: Low
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    ソリューションに Web フロントエンドと Web API の両方が含まれている場合は、それらを個別の App Service アプリに分解すると、ワークロードによるソリューションの分解が容易になり、独立したスケーリングが可能になります。最初は、両方を同じプランにデプロイし、必要に応じて個別にスケーリングするために分離できます。
  potentialBenefits: Independent scaling, easier management
  pgVerified: false
  publishedToLearn: false
  automationAvailable: false
  tags: null
  learnMoreLink:
    - name: Resiliency checklist for specific Azure services
      url: "https://learn.microsoft.com/azure/architecture/checklist/resiliency-per-service#app-service"

- description: ログ用に別のストレージ アカウントを作成する
  aprlGuid: 3f9ddb59-0bb3-4acb-9c9b-99aa1776f0ab
  recommendationTypeId: null
  recommendationControl: Scalability
  recommendationImpact: Medium
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    ログ用に別のストレージ アカウントを作成し、アプリケーション データに同じストレージ アカウントを使用しないと、アプリケーション データの処理専用のリソースがログ プロセスによって負荷をかけられないようにすることで、ログ アクティビティによってアプリケーションのパフォーマンスが低下するのを防ぐことができます。
  potentialBenefits: Improves app performance
  pgVerified: true
  publishedToLearn: false
  automationAvailable: false
  tags: null
  learnMoreLink:
    - name: Resiliency checklist
      url: "https://learn.microsoft.com/azure/architecture/checklist/resiliency-per-service#app-service"

- description: ステージング スロットにデプロイする
  aprlGuid: a1d91661-32d4-430b-b3b6-5adeb0975df7
  recommendationTypeId: 1d3b5a51-62d4-4b77-96f6-40ed0a3aa21f
  recommendationControl: Governance
  recommendationImpact: Low
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    ステージング用のデプロイ スロットを作成して、更新をデプロイし、検証し、本番スワップの前にすべてのインスタンスがウォームアップされるようにして、不適切な更新の可能性を減らします。LKG スロットを使用すると、後で問題が発生した場合に、以前の正常な展開に簡単にロールバックできるため、信頼性が向上します。
  potentialBenefits: Safer updates and easy rollback
  pgVerified: false
  publishedToLearn: false
  automationAvailable: true
  tags: null
  learnMoreLink:
    - name: Set up staging environments in Azure App Service
      url: "https://learn.microsoft.com/azure/app-service-web/web-sites-staged-publishing"

- description: アプリを設定として保存する
  aprlGuid: 0b80b67c-afbe-4988-ad58-a85a146b681e
  recommendationTypeId: null
  recommendationControl: Other Best Practices
  recommendationImpact: Medium
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    構成にアプリ設定を使用し、Resource Manager テンプレートや PowerShell を使用して定義することで、自動デプロイ/更新プロセスの一部を容易にし、信頼性を向上させることができます。
  potentialBenefits: Enhanced reliability via automation
  pgVerified: true
  publishedToLearn: false
  automationAvailable: true
  tags: null
  learnMoreLink:
    - name: Configure web apps in Azure App Service
      url: "https://learn.microsoft.com/azure/app-service-web/web-sites-configure"

- description: App Services の正常性チェックを有効にする
  aprlGuid: fd049c28-ae6d-48f0-a641-cc3ba1a3fe1d
  recommendationTypeId: null
  recommendationControl: Other Best Practices
  recommendationImpact: High
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    稼働ワークロードには正常性チェックを使用します。正常性チェックは、異常なインスタンスからリクエストを再ルーティングし、異常なままのインスタンスを置き換えることで、アプリケーションの可用性を向上させます。正常性チェック パスでは、アプリケーションの重要なコンポーネントをチェックする必要があります。
  potentialBenefits: Enhanced reliability via automation
  pgVerified: true
  publishedToLearn: false
  automationAvailable: true
  tags: null
  learnMoreLink:
    - name: Monitor the health of App Service instances
      url: "https://learn.microsoft.com/ja-jp/azure/app-service/monitor-instances-health-check?tabs=dotnet#enable-health-check"

- description: ネットワーク アクセス制限を構成する
  aprlGuid: aab6b4a4-9981-43a4-8728-35c7ecbb746d
  recommendationTypeId: null
  recommendationControl: Governance
  recommendationImpact: Medium
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    ネットワーク アクセス制限を使用して、アプリへのネットワーク アクセスを制御する優先順位の高い許可/拒否リストを定義します。Application Gateway で使用できるような Web アプリケーション ファイアウォールは、一般向けの Web アプリケーションの保護に推奨されます。
  potentialBenefits: Enhanced security
  pgVerified: true
  publishedToLearn: false
  automationAvailable: true
  tags: null
  learnMoreLink:
    - name: Set up Azure App Service access restrictions
      url: "https://learn.microsoft.com/ja-jp/azure/app-service/app-service-ip-restrictions?tabs=azurecli"

- description: App Service の最小インスタンス数を 2 に設定する
  aprlGuid: 9e6682ac-31bc-4635-9959-ab74b52454e6
  recommendationTypeId: null
  recommendationControl: Scalability
  recommendationImpact: High
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    App Service は、運用ワークロード用に少なくとも 2 つのインスタンスで構成する必要があります。アプリのウォームアップ時間が長い場合は、少なくとも 3 つのインスタンスを使用する必要があります。
  potentialBenefits: Improves app performace
  pgVerified: true
  publishedToLearn: false
  automationAvailable: true
  tags: null
  learnMoreLink:
    - name: Ultimate guide to running healthy apps in the cloud
      url: "https://azure.github.io/AppService/2020/05/15/Robust-Apps-for-the-cloud.html"

- description: Function App の自動修復を有効にする
  aprlGuid: c6c4b962-5af4-447a-9d74-7b9c53a5dff5
  recommendationTypeId: null
  recommendationControl: High Availability
  recommendationImpact: Low
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    Auto Heal を使用すると、HTTP サーバー エラーやリソースの枯渇などの予期しない状況が発生した場合に、アプリを軽減できます。必要に応じてさまざまなトリガーを構成し、アプリをリサイクルして不適切な状態から回復することを選択できます。
  potentialBenefits: Improved app availability
  pgVerified: false
  publishedToLearn: false
  automationAvailable: true
  tags: null
  learnMoreLink:
    - name: Announcing the New Auto Healing Experience in App Service Diagnostics - Azure App Service
      url: "https://azure.github.io/AppService/2018/09/10/Announcing-the-New-Auto-Healing-Experience-in-App-Service-Diagnostics.html"

- description: ウォームアップ トリガーを Function App に追加する
  aprlGuid: 52f368ee-1d77-4b34-92db-64be269642d0
  recommendationTypeId: null
  recommendationControl: Monitoring and Alerting
  recommendationImpact: Medium
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    ウォームアップ トリガーを追加して、事前ウォーミングプロセス中にカスタム依存関係をプリロードして、関数がリクエストの処理をすぐに開始できるようにします。
  potentialBenefits: Improved app availability
  pgVerified: false
  publishedToLearn: false
  automationAvailable: false
  tags: null
  learnMoreLink:
    - name: Azure Functions Warmup Trigger
      url: "https://learn.microsoft.com/ja-jp/azure/azure-functions/functions-bindings-warmup?tabs=in-process%2Cnodejs-v4&pivots=programming-language-csharp#trigger"

- description: Function App に一意のホスト ID が設定されていることを確認する
  aprlGuid: 0b06a688-0dd6-4d73-9f72-6666ff853ca9
  recommendationTypeId: null
  recommendationControl: Governance
  recommendationImpact: Low
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    ホスト ID は 1 から 32 文字で、小文字、数字、およびダッシュのみを含み、ダッシュで開始または終了することはできず、連続するダッシュを含めることはできません。ホスト ID の値は、実行しているすべてのアプリ/スロットで一意である必要があります。
  potentialBenefits: Easier management
  pgVerified: false
  publishedToLearn: false
  automationAvailable: false
  tags: null
  learnMoreLink:
    - name: Resource naming restrictions - Azure Resource Manager
      url: "https://learn.microsoft.com/ja-jp/azure/azure-resource-manager/management/resource-name-rules"

- description: Function App でサポートされているバージョンが実行されていることを確認する
  aprlGuid: c9a278b7-024b-454b-bd54-41587c512b74
  recommendationTypeId: null
  recommendationControl: Governance
  recommendationImpact: Medium
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    2022 年 12 月 13 日以降、Azure Functions ランタイムのバージョン 2.x および 3.x で実行されている関数アプリは、延長サポートのサポート終了 (EOL) に達しました。関数アプリを Functions ランタイムのバージョン 4.x に移行することを強くお勧めします。
  potentialBenefits: Better governance
  pgVerified: false
  publishedToLearn: false
  automationAvailable: false
  tags: null
  learnMoreLink:
    - name: Migrate version 3.x to 4.x
      url: "https://learn.microsoft.com/ja-jp/azure/azure-functions/migrate-version-3-version-4?tabs=net6-in-proc%2Cazure-cli%2Cwindows&pivots=programming-language-csharp"

- description: FUNCTIONS_WORKER_RUNTIME が正しく設定されていることを確認する
  aprlGuid: 7c608f46-46b2-4cc0-bbd6-1d457c16671c
  recommendationTypeId: null
  recommendationControl: Governance
  recommendationImpact: Medium
  recommendationResourceType: Microsoft.Web/sites
  recommendationMetadataState: Active
  longDescription: |
    Function App 構成の FUNCTIONS_WORKER_RUNTIME 設定は、使用している言語に基づいて適切な値に設定する必要があります。この設定は、関数の実行に使用される言語ワーカーを決定するために使用されます。
  potentialBenefits: Better governance
  pgVerified: false
  publishedToLearn: false
  automationAvailable: false
  tags: null
  learnMoreLink:
    - name: FUNCTIONS_WORKER_RUNTIME
      url: "https://learn.microsoft.com/ja-jp/azure/azure-functions/functions-app-settings#functions_worker_runtime"
